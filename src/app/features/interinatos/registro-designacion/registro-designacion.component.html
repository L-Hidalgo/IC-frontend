<div class="container-header">
    <h3>Registro Interinato</h3>
    <mat-icon (click)="closeModal()">clear</mat-icon>
</div>
<mat-stepper>
    <mat-step label="Paso 1" state="paso-uno">
        <form [formGroup]="formStep1">
            <div class="form-row">
                <mat-form-field class="example-form-field">
                    <mat-label>Ítem Destino</mat-label>
                    <input matInput #inputPuestoNuevoId [value]="puestoDestinoEncontrado?.itemPuesto">
                    <button *ngIf="inputPuestoNuevoId.value.trim() !== ''" matSuffix mat-icon-button aria-label="Search"
                        (click)="searchDataPuestoDestino(+inputPuestoNuevoId.value)">
                        <mat-icon>search</mat-icon>
                    </button>
                </mat-form-field>
                <mat-form-field class="example-form-field">
                    <mat-label>Ítem Actual</mat-label>
                    <input matInput #inputPuestoActualId [value]="puestoActualEncontrado?.itemPuesto">
                    <button *ngIf="inputPuestoActualId.value.trim() !== ''" matSuffix mat-icon-button
                        aria-label="Search" (click)="searchDataPuestoActual(+inputPuestoActualId.value)">
                        <mat-icon>search</mat-icon>
                    </button>
                </mat-form-field>
            </div>
            <div class="form-row">
                <div class="puesto-nuevo" *ngIf="puestoDestinoEncontrado">
                    <h4>Puesto de Destino</h4>
                    <p><strong>Gerencia:</strong> {{ puestoDestinoEncontrado.departamento?.gerencia?.nombreGerencia }}
                    </p>
                    <p><strong>Departamento:</strong> {{ puestoDestinoEncontrado.departamento?.nombreDepartamento }}</p>
                    <p><strong>Cargo:</strong> {{ puestoDestinoEncontrado.denominacionPuesto }}</p>
                    <p>
                        <strong>Funcionario:</strong>
                        <ng-container *ngIf="puestoDestinoEncontrado.personaActual; else noFuncionarioDestino">
                            {{ puestoDestinoEncontrado.personaActual.nombrePersona }}
                            {{ puestoDestinoEncontrado.personaActual.primerApellidoPersona }}
                            {{ puestoDestinoEncontrado.personaActual.segundoApellidoPersona }}
                        </ng-container>
                        <ng-template #noFuncionarioDestino>
                            <span *ngIf="puestoDestinoEncontrado.estadoId === 1">Acéfalo</span>
                        </ng-template>
                    </p>
                </div>
                <div class="puesto-actual" *ngIf="puestoActualEncontrado">
                    <h4>Puesto Actual</h4>
                    <p><strong>Gerencia:</strong> {{ puestoActualEncontrado.departamento?.gerencia?.nombreGerencia }}
                    </p>
                    <p><strong>Departamento:</strong> {{ puestoActualEncontrado.departamento?.nombreDepartamento }}</p>
                    <p><strong>Denominación:</strong> {{ puestoActualEncontrado.denominacionPuesto }}</p>
                    <p>
                        <strong>Funcionario:</strong>
                        <ng-container *ngIf="puestoActualEncontrado.personaActual; else noFuncionarioActual">
                            {{ puestoActualEncontrado.personaActual.nombrePersona }}
                            {{ puestoActualEncontrado.personaActual.primerApellidoPersona }}
                            {{ puestoActualEncontrado.personaActual.segundoApellidoPersona }}
                        </ng-container>
                        <ng-template #noFuncionarioActual>
                            <span *ngIf="puestoActualEncontrado?.estadoId === 1">Acéfalo</span>
                        </ng-template>
                    </p>
                </div>
            </div>
        </form>
        <div>
            <button mat-button matStepperNext class="button-primary">Siguiente</button>
        </div>
    </mat-step>
    <mat-step label="Paso 2" state="paso-dos">
        <form [formGroup]="formStep2">
            <div class="form-row">
                <div class="input-width">
                    <mat-form-field class="example-full-width">
                        <mat-label>Proveído/Trámite</mat-label>
                        <input matInput formControlName="proveidoTramiteInterinato">
                    </mat-form-field>
                </div>
                <div class="input-width"><mat-form-field class="example-full-width">
                        <mat-label>Cite/Nota/Informe/Minuta</mat-label>
                        <input matInput formControlName="citeNotaInformeMinutaInterinato">
                    </mat-form-field>
                </div>
                <div class="date-width">
                    <mat-form-field class="date-picker-field">
                        <mat-label>Fecha Proveido</mat-label>
                        <input matInput [matDatepicker]="picker" formControlName="fchCiteNotaInfMinutaInterinato">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        <mat-hint>DD/MM/YYYY</mat-hint>
                    </mat-form-field>
                </div>
            </div>
            <div class="divider"></div>
            <div class="form-row">
                <div class="input-width">
                    <mat-form-field class="example-full-width">
                        <mat-label>Cite/Informe</mat-label>
                        <input matInput formControlName="citeInformeInterinato">
                    </mat-form-field>
                </div>
                <div class="input-width">
                    <mat-form-field class="example-full-width">
                        <mat-label>Fojas/Informe</mat-label>
                        <input matInput formControlName="fojasInformeInterinato">
                    </mat-form-field>
                </div>
                <div class="date-width">
                    <mat-form-field class="date-picker-field">
                        <mat-label>Fecha Informe</mat-label>
                        <input matInput [matDatepicker]="picker2" formControlName="fchMemorandumRapInterinato">
                        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                        <mat-datepicker #picker2></mat-datepicker>
                        <mat-hint>DD/MM/YYYY</mat-hint>
                    </mat-form-field>
                </div>
            </div>
            <div class="form-row"><mat-form-field class="example-full-width">
                    <mat-label>Cite/Mem</mat-label>
                    <input matInput formControlName="citeMemorandumInterinato">
                </mat-form-field><mat-form-field class="example-full-width">
                    <mat-label>Código/Mem</mat-label>
                    <input matInput formControlName="codigoMemorandumInterinato">
                </mat-form-field>
            </div>
            <div class="form-row">
                <mat-form-field class="example-full-width">
                    <mat-label>Cite/Rap</mat-label>
                    <input matInput formControlName="citeRapInterinato">
                </mat-form-field>
                <mat-form-field class="example-full-width">
                    <mat-label>Código/Rap</mat-label>
                    <input matInput formControlName="codigoRapInterinato">
                </mat-form-field>
            </div>
        </form>
        <div>
            <button mat-button matStepperPrevious class="button-gray">Atras</button>
            <button mat-button matStepperNext class="button-primary">Siguiente</button>
        </div>
    </mat-step>
    <mat-step label="Paso 3">
        <form [formGroup]="formStep3">
            <div class="form-row">
                <mat-form-field class="date-picker-field" style="width: 10px;">
                    <mat-label>Introduce un rango de fechas</mat-label>
                    <mat-date-range-input [rangePicker]="picker3">
                        <input matStartDate placeholder="Fecha de inicio" formControlName="fchInicioInterinato"
                            required>
                        <input matEndDate placeholder="Fecha de fin" formControlName="fchFinInterinato" required>
                    </mat-date-range-input>
                    <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                    <mat-date-range-picker #picker3></mat-date-range-picker>
                    <mat-hint>DD/MM/YYYY – DD/MM/YYYY</mat-hint>
                </mat-form-field>

                <div class="input-width" style="margin-left:70px; margin-right: 70px;">
                    <mat-form-field class="example-full-width" style="margin-left: 70px; margin-right: 70px;">
                        <mat-label>Período de Interinato</mat-label>
                        <input matInput disabled [value]="calcularPeriodo()">
                    </mat-form-field>
                </div>
                <div class="input-width-dias">
                    <mat-form-field class="example-full-width">
                        <mat-label>Días</mat-label>
                        <input matInput disabled [value]="calcularTotalDias()">
                    </mat-form-field>
                </div>
            </div>
            <div class="form-row">
                <mat-form-field>
                    <mat-label>NOTA/INFORME/MINUTA</mat-label>
                    <select matNativeControl formControlName="tipoNotaInformeMinutaInterinato">
                        <option value="" disabled selected>Selecciona una opción</option>
                        <option value="Nota">NOTA</option>
                        <option value="Informe">INFORME</option>
                        <option value="Minuta">MINUTA</option>
                    </select>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>SAYRI?</mat-label>
                    <select matNativeControl formControlName="sayriInterinato">
                        <option value="" disabled selected>Selecciona una opción</option>
                        <option value="Registrado">REGISTRADO</option>
                        <option value="Sayri">SAYRI</option>
                    </select>
                </mat-form-field>
            </div>
            <div class="form-row">
                <mat-form-field class="example-full-width">
                    <mat-label>OBSERVACIONES</mat-label>
                    <textarea matInput placeholder="Escribir..." formControlName="observacionesInterinato"></textarea>
                </mat-form-field>
            </div>
        </form>
        <div>
            <button mat-button matStepperPrevious class="button-gray">Atras</button>
            <button mat-button matStepperNext (click)="enviarDatos()" class="button-primary">
                Guardar
            </button>
        </div>
    </mat-step>
    <ng-template matStepperIcon="paso-uno">
        <mat-icon>create</mat-icon>
    </ng-template>
    <ng-template matStepperIcon="paso-dos">
        <mat-icon>create</mat-icon>
    </ng-template>
</mat-stepper>