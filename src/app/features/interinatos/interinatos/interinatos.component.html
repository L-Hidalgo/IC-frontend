<div class="container" fxLayout="row" fxLayoutAlign="center none">
    <div fxFlex="95%">
        <h2>Interinatos</h2>
        <div class="botones-container">
            <button mat-raised-button class="button-color"
                (click)="openRegistroInterinatoModal()"><mat-icon>person_add</mat-icon> Nuevo</button>
            <button mat-raised-button class="button-sin-color" (click)="mostrarFiltros = !mostrarFiltros">
                <mat-icon>search</mat-icon>
            </button>
        </div>
        <mat-card>
            <mat-form-field *ngIf="mostrarFiltros">
                <mat-label>Buscar por persona o item</mat-label>
                <input matInput (input)="byFiltrosInterinato()"
                    placeholder="Buscar por Nombre de Persona o Item Destino" #puestoPersona>
            </mat-form-field>
            <mat-card-content>
                <table mat-table [dataSource]="dataSource" matSort class="custom-table">
                    <ng-container matColumnDef="id">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
                        <td mat-cell *matCellDef="let row; let i = index">{{ i + 1 }}</td>
                    </ng-container>
                    <ng-container matColumnDef="persona">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Persona </th>
                        <td mat-cell *matCellDef="let row"> {{row.personaActual.nombrePersona }}
                            {{row.personaActual.primerApellidoPersona }} {{row.personaActual.segundoApellidoPersona }}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="puestoDestino">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Puesto Destino </th>
                        <td mat-cell *matCellDef="let row" class="centered-cell">
                            <div class="line1">{{ row.puestoNuevo.denominacionPuesto }}</div>
                            <div class="line2">{{ row.puestoNuevo.departamento.nombreDepartamento }}</div>
                            <div class="line3">{{ row.puestoNuevo.departamento.gerencia.nombreGerencia }}</div>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="puestoActual">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Puesto Actual </th>
                        <td mat-cell *matCellDef="let row" class="centered-cell">
                            <div class="line1">{{ row.puestoActual.denominacionPuesto }}</div>
                            <div class="line2">{{ row.puestoActual.departamento.nombreDepartamento }}</div>
                            <div class="line3">{{ row.puestoActual.departamento.gerencia.nombreGerencia }}</div>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="fchInicioInterinato">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Fch. Inicio de Interinato </th>
                        <td mat-cell *matCellDef="let row" class="centered-cell"> {{
                            transformarFecha(row.fchInicioInterinato) }} </td>
                    </ng-container>
                    <ng-container matColumnDef="fchFinInterinato">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Fch. Fin de Interinato </th>
                        <td mat-cell *matCellDef="let row" class="centered-cell"> {{
                            transformarFecha(row.fchFinInterinato) }}</td>
                    </ng-container>
                    <ng-container matColumnDef="acciones">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Acciones </th>
                        <td mat-cell *matCellDef="let row" class="acciones-cell">
                            <button mat-button class="boton-azul" (click)="openModalEditarInterinato(row.idInterinato)">
                                <mat-icon class="icono-pequeno">create</mat-icon>
                            </button>
                            <button mat-button class="boton-rojo">
                                <mat-icon class="icono-pequeno">clear</mat-icon>
                            </button>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                    <tr class="mat-row" *matNoDataRow>
                        <td class="mat-cell" colspan="4">No hay datos que coincidan con el filtro.
                            "{{ obtenerValorInput() }}"</td>
                    </tr>
                </table>
                <div class="mat-paginator mat-paginator-right">
                    <div class="mat-paginator-options">
                        <span class="mat-paginator-label">Items por p√°gina:</span>
                        <select id="pageSizeSelect" class="form-select form-select-sm"
                            (change)="onPageSizeChange($event)">
                            <option *ngFor="let option of pageSizeOptions" [value]="option"
                                [selected]="option === pageSize">{{ option }}
                            </option>
                        </select>
                    </div>
                    <div class="mat-paginator-navigation">
                        <button class="mat-paginator-navigation-button mat-paginator-previous"
                            [disabled]="pageIndex === 0" (click)="onPreviousPage()">
                            <mat-icon aria-hidden="true">chevron_left</mat-icon>
                        </button>
                        <div class="mat-paginator-page">
                            <span class="mat-paginator-range-label">{{ rangeLabel }}</span>
                        </div>
                        <button class="mat-paginator-navigation-button mat-paginator-next"
                            [disabled]="(pageIndex + 1) * pageSize >= length" (click)="onNextPage()">
                            <mat-icon aria-hidden="true">chevron_right</mat-icon>
                        </button>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
</div>